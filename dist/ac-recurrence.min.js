!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("rrule"),require("angular")):"function"==typeof define&&define.amd?define(["rrule","angular"],n):"object"==typeof exports?exports.acRecurrence=n(require("rrule"),require("angular")):e.acRecurrence=n(e.RRule,e.angular)}("undefined"!=typeof self?self:this,function(e,n){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r(1),o=(r.n(t),r(2)),i=(r.n(o),r(3));r.n(i);r(4),r(5),r(6),r(8),r(9),r(10)},function(e,n){},function(e,n){!function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=5)}([function(e,n){e.exports=angular},function(e,n,r){var t="/ac-grid.html";r(0).module("ac-grid").run(["$templateCache",function(e){e.put(t,'<div class="outer">\n  <div class="vis-hidden" ng-repeat="row in ::options | chunkBy : perRow">\n    <input id="{{\'cell-\' + $id}}" ng-model="selections[cell.value]" type="checkbox" ng-repeat-start="cell in row" ng-disabled="disabled">\n    <label for="{{\'cell-\' + $id }}" ng-repeat-end>{{ cell.label }}</label>\n  </div>\n</div>\n')}]),e.exports=t},function(e,n,r){"use strict";function t(){function e(e){var n={};return(e||[]).map(function(e){n[e]=!0}),n}function n(e){var n=[];for(var r in e.selections)!0===e.selections[r]&&n.push(r);return n}return{link:function(r,t,o,i){i.$formatters.push(e),i.$parsers.push(n),i.$render=function(){r.selections=i.$viewValue},r.$watch("selections",function(){var e=r.selections||{};i.$setViewValue({selections:e})},!0)},require:"ngModel",restrict:"E",scope:{disabled:"<",ngModel:"=",options:"<",perRow:"<"},templateUrl:i.default}}var o,i=(o=r(1))&&o.__esModule?o:{default:o};Object.defineProperty(n,"__esModule",{value:!0}),n.default=t,angular.module("ac-grid").directive("acGrid",t)},function(e,n,r){"use strict";angular.module("ac-grid").filter("chunkBy",function(){return e=function(e,n){return e.reduce(function(e,r,t){return 0==t%n?e.push([r]):e[Math.floor(t/n)].push(r),e},[])},n={},function(){for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];if(t in n)return n[t];var i=e.apply(void 0,t);return n[t]=i,i};var e,n})},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=angular.module("ac-grid",[]);n.default=t},function(e,n,r){"use strict";r(10),r(4),r(3),r(2)},,,,,function(e,n){}])},function(n,r){n.exports=e},function(e,n){!function(){"use strict";angular.module("ac-recurrence",["ac-grid"])}()},function(e,n){!function(){"use strict";angular.module("ac-recurrence").constant("RRule",RRule)}()},function(e,n,r){var t="ac-recurrence.html";r(7).module("ac-recurrence").run(["$templateCache",function(e){e.put(t,'<div ng-form>\n  <fieldset>\n    <label>Frequency</label>\n    <select ng-model="vm.properties.frequency" ng-change="vm.setFrequency()">\n      <option value="3">daily</option>\n      <option value="2">weekly</option>\n      <option value="1">monthly</option>\n      <option value="0">yearly</option>\n    </select>\n\n    <div>\n      <label>Every</label>\n      <input type="number" ng-model="vm.properties.interval" min="1"></input>\n      <label>{{ vm.word }}<ng-pluralize count="vm.properties.interval" when="{ 1: \'\', other: \'s\'}"></ng-pluralize>{{ vm.preposition }}</label>\n    </div>\n\n    <ac-grid ng-if="vm.properties.frequency === \'2\'" ng-model="vm.properties.byWeekDay" options="vm.days" per-row="7"></ac-grid>\n    <ac-grid ng-if="vm.properties.frequency === \'0\'" ng-model="vm.properties.byMonth" options="vm.months" per-row="3"></ac-grid>\n\n    <div ng-if="[\'1\', \'0\'].includes(vm.properties.frequency)">\n      <input ng-model="vm.properties.type" value="day" type="radio">\n      <label>on the</label>\n      <input type="number" ng-model="vm.properties.monthDay" min="1" max="31"><ng-pluralize count="vm.properties.monthDay" when="{ 1: \'st\', 2: \'nd\', 3: \'rd\', 21: \'st\', 22: \'nd\', 23: \'rd\', 31: \'st\', other: \'th\'}"></ng-pluralize>\n    </div>\n    <div ng-if="[\'1\', \'0\'].includes(vm.properties.frequency)">\n      <input ng-model="vm.properties.type" value="offset" type="radio">\n      <label>on the</label>\n      <select ng-model="vm.properties.offset">\n        <option ng-value="1">first</option>\n        <option value="2">second</option>\n        <option value="3">third</option>\n        <option value="4">fourth</option>\n        <option value="5">fifth</option>\n        <option value="-1">last</option>\n      </select>\n      <select ng-model="vm.properties.offsetPeriod">\n        <option ng-value="6">Sunday</option>\n        <option ng-value="0">Monday</option>\n        <option ng-value="1">Tuesday</option>\n        <option ng-value="2">Wednesday</option>\n        <option ng-value="3">Thursday</option>\n        <option ng-value="4">Friday</option>\n        <option ng-value="5">Saturday</option>\n        <option value="wkday">weekday</option>\n        <option value="wkend">weekend day</option>\n      </select>\n    </div>\n  </fieldset>\n</div>\n')}]),e.exports=t},function(e,r){e.exports=n},function(e,n){!function(){function e(e){function n(){return{daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:[{label:"S",value:6},{label:"M",value:0},{label:"T",value:1},{label:"W",value:2},{label:"T",value:3},{label:"F",value:4},{label:"S",value:5}],shortMonths:[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],frequencies:{3:"day",2:"week",1:"month",0:"year"}}}this.$get=n}angular.module("ac-recurrence").provider("localNames",e),e.$inject=["RRule"]}()},function(e,n){!function(){"use strict";function e(e,n,r,t){t.$formatters.push(function(e){e=e||"";var n;try{n=new RRule(RRule.parseString(e))}catch(e){console.log(e),n=new RRule}return n}),t.$parsers.push(function(n){return e.vm.printOut(),e.vm.rrule.toString()}),t.$render=function(){t.$viewValue.origOptions.bymonth&&(e.vm.properties.byMonth=[t.$viewValue.origOptions.bymonth]),t.$viewValue.origOptions.bymonthday?e.vm.properties.monthDay=t.$viewValue.origOptions.bymonthday:e.vm.properties.monthDay=null,e.vm.properties.frequency=String(t.$viewValue.origOptions.freq||0),e.vm.setFrequency(),e.vm.properties.interval=t.$viewValue.origOptions.interval||null;var n=t.$viewValue.origOptions.byweekday||[];n[0]&&n[0].n?(e.vm.properties.type="offset",e.vm.properties.offset=n[0].n,e.vm.properties.offsetPeriod=n[0].weekday):(e.vm.properties.type="day",e.vm.properties.offset=1,e.vm.properties.offsetPeriod=6,e.vm.properties.byWeekDay=n.map(function(e){return e.weekday}),t.$viewValue.origOptions.bysetpos&&(e.vm.properties.type="offset",e.vm.properties.offset=t.$viewValue.origOptions.bysetpos,angular.equals(e.vm.properties.byWeekDay,[5,6])?e.vm.properties.offsetPeriod="wkend":e.vm.properties.offsetPeriod="wkday"))},e.$watch("vm.properties",function(){t.$setViewValue(e.vm.rrule)},!0)}function n(){return{controller:"acRecurrenceController as vm",link:e,restrict:"E",require:"ngModel",scope:{},templateUrl:"ac-recurrence.html"}}angular.module("ac-recurrence").directive("acRecurrence",n)}()},function(e,n){!function(){"use strict";function e(e,n){function r(){o.word=e.frequencies[o.properties.frequency],"YEARLY"===i[o.properties.frequency]?o.preposition=" in":"WEEKLY"===i[o.properties.frequency]?o.preposition=" on":o.preposition="","WEEKLY"!==i[o.properties.frequency]&&"DAILY"!==i[o.properties.frequency]||(o.properties.type="")}function t(){var e=[];"WEEKLY"===i[o.properties.frequency]&&(e=o.properties.byWeekDay);var r=null,t=null,l=null;"YEARLY"!==i[o.properties.frequency]&&"MONTHLY"!==i[o.properties.frequency]||("offset"===o.properties.type?"wkday"===o.properties.offsetPeriod?(e.push(n.MO),e.push(n.TU),e.push(n.WE),e.push(n.TH),e.push(n.FR),r=parseInt(o.properties.offset)):"wkend"===o.properties.offsetPeriod?(e.push(n.SA),e.push(n.SU),r=parseInt(o.properties.offset)):e.push(n[u[o.properties.offsetPeriod]].nth(o.properties.offset)):t=o.properties.monthDay,"YEARLY"===i[o.properties.frequency]&&(l=o.properties.byMonth)),o.rrule=new n({freq:parseInt(o.properties.frequency),interval:o.properties.interval,bymonth:l,bymonthday:t,bysetpos:r,byweekday:e})}var o=this;o.properties={},o.months=e.shortMonths,o.days=e.shortDays,o.printOut=t,o.rrule="",o.setFrequency=r,o.preposition=" in",o.word="year";var i={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"},u={0:"MO",1:"TU",2:"WE",3:"TH",4:"FR",5:"SA",6:"SU"}}e.$inject=["localNames","RRule"],angular.module("ac-recurrence").controller("acRecurrenceController",e)}()}])});